name: Postgres

runs:
  using: "composite"

  steps:
    - name: Install dependencies
      shell: bash
      run: npm ci

    - name: Connect to PostgreSQL
      shell: bash
      # Runs a script that creates a PostgreSQL table, populates
      # the table with data, and then retrieves the data.
      run: node client.js
      # Environment variable used by the `client.js` script to create
      # a new PostgreSQL client.
      env:
        # The hostname used to communicate with the PostgreSQL service container
        DB_HOST: postgres
        # The default PostgreSQL port
        DB_PORT: 5430
        DB_USERNAME: "postgres"
        DB_PASSWORD: "postgres"
        DB_NAME: "postgres"