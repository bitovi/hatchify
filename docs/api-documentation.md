# API Documentation

This page links to all the other API documentation. This is like a big cheat sheet.

## Schema

<pre>
import { PartialSchema, belongsTo, boolean, datetime, integer, hasMany, string } from "@hatchifyjs/core"
  
export const SalesPerson = {
  <a href="schema/naming.md#schemaname">name</a>: "SalesPerson",
  <a href="schema/naming.md#schemapluralname">pluralName</a>: "SalesPeople",
  id: <a href="schema/attribute-types/uuid.md">uuid</a>({required: true, autoIncrement: true}),
  attributes: {
    <a href="schema/naming.md#schemaattributesattribute_name">name</a>: <a href="./attribute-types/string.md">string</a>({ required: true }),
    description: <a href="schema/attribute-types/text.md">text</a>(),
    dueDate: <a href="schema/attribute-types/datetime.md">datetime</a>(),
    importance: <a href="schema/attribute-types/integer.md">integer</a>({min: 0, max: 100, step: 10}),
    complete: <a href="schema/attribute-types/boolean.md">boolean</a>({ default: false }),
  },
  relationships: {
    salesGroup: <a href="schema/relationship-types/belongs-to.md">belongsTo</a>(),
    accounts:   <a href="schema/relationship-types/has-many.md">hasMany</a>(),
    todos:      hasMany().<a href="schema/relationship-types/has-many-through.md">through</a>()
  },
} satisfies <a href="schema/naming.md">PartialSchema</a>
</pre>

## Backend

<pre>
import { hatchifyKoa } from "<a href="./koa/README.md">@hatchifyjs/koa</a>"
  
const <a href="./koa/README.md#hatchedkoa">hatchedKoa</a> = <a href="./koa/README.md#hatchifykoa">hatchifyKoa</a>({ SalesPerson }, { prefix: "/api" })

hatchedKoa.<a href="schema/README.md">schema</a>.SalesPerson  <b>// The full schemas</b>
hatchedKoa.modelSync()         <b>// Sync the database with the schema</b>
hatchedKoa.printEndpoints()    <b>// Prints a list of endpoints generated by Hatchify</b>

<b>// ðŸ›‘ JSONAPI Middleware for CRUD operations ðŸ›‘</b>
router.get(  "/sales-people",     hatchedKoa.middleware.<a href="./koa/hatchedKoa.middleware.md#hatchedkoamiddlewareallmodels">allModels</a>.<a href="./koa/hatchedKoa.middleware.md#all">all</a>);
router.get(  "/sales-people",     hatchedKoa.middleware.SalesPerson.<a href="./koa/hatchedKoa.middleware.md#findandcountall">findAndCountAll</a>)
router.get(  "/sales-people/:id", hatchedKoa.middleware.SalesPerson.<a href="./koa/hatchedKoa.middleware.md#findone">findOne</a>)
router.post( "/sales-people",     hatchedKoa.middleware.SalesPerson.<a href="./koa/hatchedKoa.middleware.md#create">create</a>)
router.patch("/sales-people/:id", hatchedKoa.middleware.SalesPerson.<a href="./koa/hatchedKoa.middleware.md#update">update</a>)
router.del(  "/sales-people/:id", hatchedKoa.middleware.SalesPerson.<a href="./koa/hatchedKoa.middleware.md#destroy">destroy</a>)

<b>// Methods that do "everything" the middleware does</b>
await hatchedKoa.<a href="./koa/hatchedKoa.everything.md">everything</a>.SalesPerson.<a href="./koa/hatchedKoa.everything.md#findall">findAll</a>("filter[name]=Jane")
await hatchedKoa.everything.SalesPerson.<a href="./koa/hatchedKoa.everything.md#findandcountall">findAndCountAll</a>("filter[name]=Baking")
await hatchedKoa.everything.SalesPerson.<a href="./koa/hatchedKoa.everything.md#findOne">findOne</a>("filter[name]=Baking")
await hatchedKoa.everything.SalesPerson.<a href="./koa/hatchedKoa.everything.md#create">create</a>(JSONAPI_PAYLOAD)
await hatchedKoa.everything.SalesPerson.<a href="./koa/hatchedKoa.everything.md#update">update</a>(ðŸ›‘, UUID)
await hatchedKoa.everything.SalesPerson.<a href="./koa/hatchedKoa.everything.md#destroy">destroy</a>("",UUID)

<b>// Parse JSONAPI requests into arguments for sequelize</b>
await hatchedKoa.<a href="./koa/hatchedKoa.parse.md">parse</a>.SalesPerson.<a href="./koa/hatchedKoa.parse.md#findall">findAll</a>("filter[name]=Jane")
await hatchedKoa.parse.SalesPerson.<a href="./koa/hatchedKoa.parse.md#findandcountall">findAndCountAll</a>("filter[name]=Baking")
await hatchedKoa.parse.SalesPerson.<a href="./koa/hatchedKoa.parse.md#findOne">findOne</a>("filter[name]=Baking")
await hatchedKoa.parse.SalesPerson.<a href="./koa/hatchedKoa.parse.md#create">create</a>(JSONAPI_PAYLOAD)
await hatchedKoa.parse.SalesPerson.<a href="./koa/hatchedKoa.parse.md#update">update</a>(ðŸ›‘, UUID)
await hatchedKoa.parse.SalesPerson.<a href="./koa/hatchedKoa.parse.md#destroy">destroy</a>("",UUID)

<b>// Use the underlying sequelize methods</b>
await hatchedKoa.<a href="https://sequelize.org/docs/v6/core-concepts/model-basics/#model-definition">orm</a>.models.SalesPerson.<a href="https://sequelize.org/docs/v6/core-concepts/model-querying-basics/#specifying-attributes-for-select-queries">findAll</a>({where: {name: "Jane"}})
await hatchedKoa.orm.models.SalesPerson.<a href="https://sequelize.org/docs/v6/core-concepts/model-querying-basics/#simple-insert-queries">create</a>({name: "Justin"})
await hatchedKoa.orm.models.SalesPerson.<a href="https://sequelize.org/docs/v6/core-concepts/model-querying-basics/#simple-update-queries">update</a>({name: "Roye"},{where: {id: UUID}})
await hatchedKoa.orm.models.SalesPerson.<a href="https://sequelize.org/docs/v6/core-concepts/model-querying-basics/#simple-delete-queries">destroy</a>({where: {id: UUID}})

<b>// Serialize sequelize data back to JSONAPI responses</b>
await hatchedKoa.<a href="./koa/hatchedKoa.parse.md">serialize</a>.SalesPerson.<a href="./koa/hatchedKoa.serialize.md#findall">findAll</a>([{ id: UUID, name: "Roye" }])
await hatchedKoa.serialize.SalesPerson.<a href="./koa/hatchedKoa.serialize.md#findandcountall">findAndCountAll</a>({rows: [{id: UUID, ...}], count: 1})
await hatchedKoa.serialize.SalesPerson.<a href="./koa/hatchedKoa.serialize.md#findOne">findOne</a>({ id: UUID, name: "Roye" })
await hatchedKoa.serialize.SalesPerson.<a href="./koa/hatchedKoa.serialize.md#create">create</a>({ id: UUID, name: "Roye" })
await hatchedKoa.serialize.SalesPerson.<a href="./koa/hatchedKoa.serialize.md#update">update</a>(1, { id: UUID, name: "Roye" })
await hatchedKoa.serialize.SalesPerson.<a href="./koa/hatchedKoa.serialize.md#destroy">destroy</a>(2)
</pre>

## JSON:API Services

<pre>
GET /api/sales-people?
  <a href="./jsonapi/reading/filtering/README.md">filter</a>[name]<a href="./jsonapi/reading/filtering#omitted-operators">=</a>Justin
</pre>

## Frontend
