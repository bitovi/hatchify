# API Documentation

This page links to all the other API documentation. This is like a big cheat sheet.

## Schema

<pre>
import { PartialSchema, 
  boolean, datetime, dateonly, integer, string, enumerate
  belongsTo, hasMany, hasOne } from "@hatchifyjs/core"
  
export const SalesPerson = {
  <a href="core/PartialSchema.md#name">name</a>: "SalesPerson",
  <a href="core/PartialSchema.md#pluralname">pluralName</a>: "SalesPeople",
  <a href="core/PartialSchema.md#id">id</a>: <a href="core/attribute-types/uuid.md">uuid</a>({required: true, autoIncrement: true}),
  <a href="./core/attribute-types/README.md">attributes</a>: {
    <a href="core/PartialSchema#general-guidelines">name</a>:         <a href="core/attribute-types/string.md">string</a>({ required: true }),
    description:  <a href="core/attribute-types/text.md">text</a>(),
    hireDate:     <a href="core/attribute-types/datetime.md">datetime</a>(),
    birthday:     <a href="./core/attribute-types/datetime.md">dateonly</a>(),
    commission:   <a href="./core/attribute-types/number.md">number</a>({min: 0}),
    importance:   <a href="core/attribute-types/integer.md">integer</a>({min: 0, max: 100, step: 10}),
    isSenior:     <a href="core/attribute-types/boolean.md">boolean</a>({ default: false }),
    status:       <a href="core/attribute-types/enum.md">enumerate</a>({ values: ["active", "inactive"] }),
    salesGroupId: <a href="./core/attribute-types/uuid.md">uuid</a>(),
  },
  <a href="./core/relationship-types/README.md">relationships</a>: {
    salesGroup: <a href="core/relationship-types/belongs-to.md">belongsTo</a>(),
    accounts:   <a href="core/relationship-types/has-many.md">hasMany</a>(),
    todos:      hasMany().<a href="core/relationship-types/has-many-through.md">through</a>()
    user:       <a href="./core/relationship-types/has-one.md">hasOne</a>()
  },
} satisfies <a href="core/PartialSchema.md">PartialSchema</a>
</pre>

## Backend

<pre>
import { hatchifyKoa } from "<a href="./koa/README.md">@hatchifyjs/koa</a>"
  
const <a href="./koa/README.md#hatchedkoa">hatchedKoa</a> = <a href="./koa/README.md#hatchifykoa">hatchifyKoa</a>({ SalesPerson }, { prefix: "/api" })

hatchedKoa.<a href="core/README.md">schema</a>.SalesPerson  <b>// The full schemas</b>
hatchedKoa.modelSync()         <b>// Sync the database with the schema</b>
hatchedKoa.printEndpoints()    <b>// Prints a list of endpoints generated by Hatchify</b>

<b>// JSONAPI Middleware for CRUD operations</b>
app.use(hatchedKoa.middleware.<a href="./koa/hatchedKoa.middleware.md#hatchedkoamiddlewareallmodels">allModels</a>.<a href="./koa/hatchedKoa.middleware.md#all">all</a>);
app.use(hatchedKoa.middleware.SalesPerson.<a href="./koa/hatchedKoa.middleware.md#findandcountall">findAndCountAll</a>)
app.use(hatchedKoa.middleware.SalesPerson.<a href="./koa/hatchedKoa.middleware.md#findone">findOne</a>)
app.use(hatchedKoa.middleware.SalesPerson.<a href="./koa/hatchedKoa.middleware.md#create">create</a>)
app.use(hatchedKoa.middleware.SalesPerson.<a href="./koa/hatchedKoa.middleware.md#update">update</a>)
app.use(hatchedKoa.middleware.SalesPerson.<a href="./koa/hatchedKoa.middleware.md#destroy">destroy</a>)

<b>// Methods that do "everything" the middleware does</b>
await hatchedKoa.<a href="./koa/hatchedKoa.everything.md">everything</a>.SalesPerson.<a href="./koa/hatchedKoa.everything.md#findall">findAll</a>("filter[name]=Jane")
await hatchedKoa.everything.SalesPerson.<a href="./koa/hatchedKoa.everything.md#findandcountall">findAndCountAll</a>("filter[name]=Baking")
await hatchedKoa.everything.SalesPerson.<a href="./koa/hatchedKoa.everything.md#findOne">findOne</a>("filter[name]=Baking")
await hatchedKoa.everything.SalesPerson.<a href="./koa/hatchedKoa.everything.md#create">create</a>({jsonapi: {...}, data: {...}})
await hatchedKoa.everything.SalesPerson.<a href="./koa/hatchedKoa.everything.md#update">update</a>({jsonapi: {...}, data: {...}}, UUID)
await hatchedKoa.everything.SalesPerson.<a href="./koa/hatchedKoa.everything.md#destroy">destroy</a>(UUID)

<b>// Parse JSONAPI requests into arguments for sequelize</b>
hatchedKoa.<a href="./koa/hatchedKoa.parse.md">parse</a>.SalesPerson.<a href="./koa/hatchedKoa.parse.md#findall">findAll</a>("filter[name]=Jane")
hatchedKoa.parse.SalesPerson.<a href="./koa/hatchedKoa.parse.md#findandcountall">findAndCountAll</a>("filter[name]=Baking")
hatchedKoa.parse.SalesPerson.<a href="./koa/hatchedKoa.parse.md#findOne">findOne</a>("filter[name]=Baking")
hatchedKoa.parse.SalesPerson.<a href="./koa/hatchedKoa.parse.md#create">create</a>({jsonapi: {...}, data: {...}})
hatchedKoa.parse.SalesPerson.<a href="./koa/hatchedKoa.parse.md#update">update</a>({jsonapi: {...}, data: {...}}, UUID)
hatchedKoa.parse.SalesPerson.<a href="./koa/hatchedKoa.parse.md#destroy">destroy</a>(UUID)

<b>// Use the underlying sequelize methods</b>
await hatchedKoa.<a href="https://sequelize.org/docs/v6/core-concepts/model-basics/#model-definition">orm</a>.models.SalesPerson.<a href="https://sequelize.org/docs/v6/core-concepts/model-querying-basics/#specifying-attributes-for-select-queries">findAll</a>({where: {name: "Jane"}})
await hatchedKoa.orm.models.SalesPerson.<a href="https://sequelize.org/docs/v6/core-concepts/model-querying-basics/#simple-insert-queries">create</a>({name: "Justin"})
await hatchedKoa.orm.models.SalesPerson.<a href="https://sequelize.org/docs/v6/core-concepts/model-querying-basics/#simple-update-queries">update</a>({name: "Roye"},{where: {id: UUID}})
await hatchedKoa.orm.models.SalesPerson.<a href="https://sequelize.org/docs/v6/core-concepts/model-querying-basics/#simple-delete-queries">destroy</a>({where: {id: UUID}})

<b>// Serialize sequelize data back to JSONAPI responses</b>
hatchedKoa.<a href="./koa/hatchedKoa.parse.md">serialize</a>.SalesPerson.<a href="./koa/hatchedKoa.serialize.md#findall">findAll</a>([{ id: UUID, name: "Roye" }])
hatchedKoa.serialize.SalesPerson.<a href="./koa/hatchedKoa.serialize.md#findandcountall">findAndCountAll</a>({rows: [{id: UUID, ...}], count: 1})
hatchedKoa.serialize.SalesPerson.<a href="./koa/hatchedKoa.serialize.md#findOne">findOne</a>({ id: UUID, name: "Roye" })
hatchedKoa.serialize.SalesPerson.<a href="./koa/hatchedKoa.serialize.md#create">create</a>({ id: UUID, name: "Roye" })
hatchedKoa.serialize.SalesPerson.<a href="./koa/hatchedKoa.serialize.md#update">update</a>({ id: UUID, name: "Roye" })
hatchedKoa.serialize.SalesPerson.<a href="./koa/hatchedKoa.serialize.md#destroy">destroy</a>()
</pre>

## JSON:API Services

<pre>
GET /api/sales-people?

  <a href="./jsonapi/reading/filtering/README.md">filter</a>[name]<a href="./jsonapi/reading/filtering/no-operator.md">=</a>Justin
  filter[name][<a href="./jsonapi/reading/filtering/%24eq.md">$eq</a>]=Justin
  filter[name][<a href="./jsonapi/reading/filtering/%24ne.md">$ne</a>]=Justin
  filter[name][<a href="./jsonapi/reading/filtering/%24in.md">$in</a>]=Justin&filter[name][$in]=Roye
  filter[name][<a href="./jsonapi/reading/filtering/%24nin.md">$nin</a>]=Justin&filter[name][$nin]=Roye
  filter[name][<a href="./jsonapi/reading/filtering/%24gt.md">$gt</a>]=Roye
  filter[name][<a href="./jsonapi/reading/filtering/%24gte.md">$gte</a>]=Arthur
  filter[name][<a href="./jsonapi/reading/filtering/%24gte.md">$gte</a>]=Arthur
  filter[name][<a href="./jsonapi/reading/filtering/%24lt.md">$lt</a>]=Roye
  filter[name][<a href="./jsonapi/reading/filtering/%24lte.md">$lte</a>]=Roye
  filter[name][<a href="./jsonapi/reading/filtering/%24ilike.md">$ilike</a>]=startsWith%
  filter[name][$ilike]=%endsWith
  filter[name][$ilike]=%contains%
  filter[name][<a href="./jsonapi/reading/filtering/%24like.md">$like</a>]=startsWithCaseSensitive%
  
  <a href="./jsonapi/reading/paginating/README.md">page</a>[<a href="./jsonapi/reading/paginating/README.md#offset-and-limit-pagination">limit</a>]=5
  page[<a href="./jsonapi/reading/paginating/README.md#offset-and-limit-pagination">offset</a>]=10
  page[<a href="./jsonapi/reading/paginating/README.md#page-based-pagination">number</a>]=2
  page[<a href="./jsonapi/reading/paginating/README.md#page-based-pagination">size</a>]=20

  <a href="./jsonapi/reading/relationships/README.md">include</a>=todos,accounts.owner

  <a href="./jsonapi/reading/sorting/README.md">sort</a>=-importance,salesGroup.name

  <a href="./jsonapi/reading/sparse-fields/README.md">fields</a>[SalesPerson]=name,importance
  fields[<a href="./jsonapi/reading/sparse-fields/README.md#example-with-relationships">SalesGroup</a>]=name
</pre>

## Frontend API Layer

<pre>
import { hatchifyReactRest, createJsonapiClient } from "@hatchifyjs/react-jsonapi";

const hatchedReactRest = hatchifyReactRest(createJsonapiClient("/api", { SalesPerson }))

<b>// Promise methods</b>
hatchedReactRest.SalesPerson.<a href="">findAll</a>({ page: { number: 1, size: 10 }})
hatchedReactRest.SalesPerson.<a href="">findOne</a>("de596092-aa33-42e7-8bb7-09ec5b20d73f")
hatchedReactRest.SalesPerson.<a href="">createOne</a>({ name: "John" })
hatchedReactRest.SalesPerson.<a href="">updateOne</a>({ id: "de596092-aa33-42e7-8bb7-09ec5b20d73f", name: "Johnny" })
hatchedReactRest.SalesPerson.<a href="">deleteOne</a>("de596092-aa33-42e7-8bb7-09ec5b20d73f")

<b>// Hooks</b>
const MyReactComponent = () => {
  const [records, getAllState] = hatchedReactRest.SalesPerson.<a href="">useAll</a>({ page: { number: 1, size: 10 }})
  const [record, getOneState] = hatchedReactRest.SalesPerson.<a href="">useOne</a>("de596092-aa33-42e7-8bb7-09ec5b20d73f")
  const [create, createState] = hatchedReactRest.SalesPerson.<a href="">useCreateOne</a>()
  const [update, updateState] = hatchedReactRest.SalesPerson.<a href="">useUpdateOne</a>()
  const [delete, deleteStaet] = hatchedReactRest.SalesPerson.<a href="">useDeleteOne</a>()
}
</pre>

## Frontend Component Layer

<pre>
import { hatchifyReact, createJsonapiClient } from "@hatchifyjs/react-jsonapi";

const hatchedReact = hatchifyReact(createJsonapiClient("/api", Schemas))

hatchedReact.<a>model</a> <b>// The same as hatchedReactRest above</b>

<b>// Configure our pre-built grid ... </b>
const DataGrid = hatchedReact.components.SalesPerson.DataGrid;
const ConfiguredGrid = () => {
  return (
    &lt;<a href="./react/README.md#mui-components">ThemeProvider</a> theme={createTheme()}>
      &lt;<a href="./react/README.md#hatchifyprovider">HatchifyProvider</a>>
        &lt;<a href="./react/hatchedReact.components[schemaName].DataGrid.md">DataGrid</a>>
          &lt;<a href="./react/hatchedReact.components[schemaName].DataGrid.Column.md">DataGrid.Column</a> label="Name" field="name" />
          &lt;<a href="./react/hatchedReact.components[schemaName].DataGrid.Empty.md">DataGrid.Empty</a>>There are no records available&lt;/TodoDataGrid.Empty>
        &lt;/DataGrid>
      &lt;/HatchifyProvider>
    &lt;/ThemeProvider>
  )
}

<b>// Or, build the grid yourself</b>
const useDataGridState = hatchedReact.state.SalesPerson.useDataGridState;
const Filters = hatchedReact.components.SalesPerson.Filters;
const List = hatchedReact.components.SalesPerson.List;
const Pagination = hatchedReact.components.SalesPerson.Pagination;
  
const ManagedGrid = () => {
  const state = <a href="./react/README.md#mui-components">useDataGridState</a>()
  return (
    &lt;ThemeProvider theme={createTheme()}>
      &lt;HatchifyProvider>
        &lt;Filters {...state} />
        &lt;List {...state}>
        &lt;Pagination {...state} />
      &lt;/HatchifyProvider>
    &lt;/ThemeProvider>
  )
}
</pre>
